<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>è‡ªç”±æ‹–æ›³éŠæˆ²å¯¦é©—å®¤</title>
    <style>
        body {
            background-color: #2c3e50;
            margin: 0;
            overflow: hidden; /* é˜²æ­¢å‡ºç¾æ²è»¸ */
            width: 100vw;
            height: 100vh;
            touch-action: none; /* ç¦ç”¨ç€è¦½å™¨é è¨­è§¸æ§è¡Œç‚º */
        }

        /* é€™æ˜¯å¯ä»¥æ‹–æ›³çš„å°ç‰© */
        .draggable {
            width: 80px;
            height: 80px;
            position: absolute; /* é—œéµï¼šå¿…é ˆæ˜¯çµ•å°å®šä½ */
            cursor: grab;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
            user-select: none; /* é˜²æ­¢æ‹–æ›³æ™‚é¸å–åˆ°æ–‡å­— */
            transition: transform 0.1s; /* å¢åŠ ä¸€é»é»å¹³æ»‘æ„Ÿ */
            -webkit-user-select: none; /* iOS ç›¸å®¹æ€§ */
            -webkit-touch-callout: none; /* iOS ç¦ç”¨é•·æŒ‰é¸å–® */
            border-radius: 10px; /* å¢åŠ è¦–è¦ºå›é¥‹ */
        }

        .draggable:active {
            cursor: grabbing;
            transform: scale(1.1); /* æŠ“å–æ™‚ç¨å¾®æ”¾å¤§ */
            z-index: 1000; /* ç¢ºä¿æŠ“èµ·çš„æ±è¥¿åœ¨æœ€ä¸Šå±¤ */
        }

        /* è§¸æ§æ™‚çš„è¦–è¦ºæ•ˆæœ */
        .draggable.dragging {
            transform: scale(1.15);
            z-index: 1000;
            opacity: 0.9;
        }
    </style>
</head>
<body>

    <div class="draggable" style="top: 100px; left: 100px;">ğŸš©</div>
    <div class="draggable" style="top: 100px; left: 250px;">â™Ÿï¸</div>
    <div class="draggable" style="top: 250px; left: 100px;">ğŸ’</div>
    <div class="draggable" style="top: 250px; left: 250px;">ğŸ”¥</div>

    <script>
        const draggables = document.querySelectorAll('.draggable');
        let activeElement = null;
        let offset = { x: 0, y: 0 };

        // åˆå§‹åŒ–æ‹–æ›³
        function initDrag(e) {
            activeElement = e.currentTarget;
            activeElement.classList.add('dragging');
            
            // å–å¾—è§¸ç™¼é»çš„åº§æ¨™ (æ”¯æ´æ»‘é¼ å’Œè§¸æ§)
            const clientX = e.clientX !== undefined ? e.clientX : e.touches[0].clientX;
            const clientY = e.clientY !== undefined ? e.clientY : e.touches[0].clientY;
            
            // è¨ˆç®—åç§»é‡
            offset.x = clientX - activeElement.offsetLeft;
            offset.y = clientY - activeElement.offsetTop;
        }

        // è™•ç†æ‹–æ›³ç§»å‹•
        function moveDrag(e) {
            if (!activeElement) return;

            // é˜²æ­¢é è¨­è¡Œç‚ºï¼ˆé‡è¦ï¼åœ¨è§¸æ§æ™‚é˜²æ­¢é é¢æ»¾å‹•ï¼‰
            if (e.touches) {
                e.preventDefault();
            }

            // å–å¾—è§¸ç™¼é»çš„åº§æ¨™
            const clientX = e.clientX !== undefined ? e.clientX : e.touches[0].clientX;
            const clientY = e.clientY !== undefined ? e.clientY : e.touches[0].clientY;

            // è¨ˆç®—æ–°ä½ç½®
            let newX = clientX - offset.x;
            let newY = clientY - offset.y;

            // é‚Šç•Œé™åˆ¶ (å¯é¸ï¼Œé˜²æ­¢æ‹–å‡ºè¢å¹•)
            // newX = Math.max(0, Math.min(newX, window.innerWidth - 80));
            // newY = Math.max(0, Math.min(newY, window.innerHeight - 80));

            activeElement.style.left = newX + 'px';
            activeElement.style.top = newY + 'px';
        }

        // çµæŸæ‹–æ›³
        function endDrag() {
            if (activeElement) {
                activeElement.classList.remove('dragging');
                activeElement = null;
            }
        }

        // ç‚ºæ¯å€‹å¯æ‹–æ›³å…ƒç´ æ·»åŠ äº‹ä»¶ç›£è½
        draggables.forEach(el => {
            // æ»‘é¼ äº‹ä»¶
            el.addEventListener('mousedown', initDrag);
            
            // è§¸æ§äº‹ä»¶
            el.addEventListener('touchstart', initDrag);
        });

        // å…¨åŸŸäº‹ä»¶ç›£è½å™¨ (å¿…é ˆåœ¨ document ä¸Š)
        document.addEventListener('mousemove', moveDrag);
        document.addEventListener('touchmove', moveDrag, { passive: false });

        document.addEventListener('mouseup', endDrag);
        document.addEventListener('touchend', endDrag);
        document.addEventListener('touchcancel', endDrag); // è§¸æ§è¢«ä¸­æ–·æ™‚
    </script>
</body>
</html>
